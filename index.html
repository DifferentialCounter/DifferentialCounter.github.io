<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Combined Cell Counter</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Left-aligned dropdown -->
    <div class="toggle-dropdown" style="margin: 20px">
      <label for="counterSelect"><strong>Select Counter:</strong></label>
      <select
        id="counterSelect"
        style="padding: 6px 10px; font-weight: bold; margin-left: 10px"
      >
        <option value="aspirate">Aspirate Counter</option>
        <option value="pb">PB Counter</option>
      </select>
    </div>

    <main>
      <div class="app-section active" id="aspirateApp">
        <div class="container" id="aspirateContainer"></div>
      </div>

      <div class="app-section" id="pbApp">
        <div class="container" id="pbContainer"></div>
      </div>
    </main>

    <!-- Shared Case Info Modal -->
    <div id="caseModal" class="modal-overlay">
      <div class="modal-content">
        <h3>Enter Case Details</h3>
        <label for="modalCaseNumber">Case Number:</label>
        <input type="text" id="modalCaseNumber" />
        <br />
        <label for="modalInitials">Pathologist Initials:</label>
        <input type="text" id="modalInitials" />
        <br />
        <button id="modalSubmitBtn">Start</button>
      </div>
    </div>

    <script>
      // Handle toggle UI
      const aspirateBtn = document.getElementById("aspirateBtn");
      const pbBtn = document.getElementById("pbBtn");
      const aspirateApp = document.getElementById("aspirateApp");
      const pbApp = document.getElementById("pbApp");

      document
        .getElementById("counterSelect")
        .addEventListener("change", (e) => {
          const value = e.target.value;
          if (value === "aspirate") {
            document.getElementById("aspirateApp").classList.add("active");
            document.getElementById("pbApp").classList.remove("active");
          } else {
            document.getElementById("pbApp").classList.add("active");
            document.getElementById("aspirateApp").classList.remove("active");
          }
        });

      document
        .getElementById("counterSelect")
        .addEventListener("change", (e) => {
          const value = e.target.value;
          document
            .getElementById("aspirateApp")
            .classList.toggle("active", value === "aspirate");
          document
            .getElementById("pbApp")
            .classList.toggle("active", value === "pb");
        });
    </script>

    <!-- Shared Modal Script -->
    <script src="scripts/caseInfo.js"></script>

    <!-- Load scripts -->
    <script src="scripts/aspirate.js"></script>
    <script src="scripts/pb.js"></script>
  </body>
</html>
